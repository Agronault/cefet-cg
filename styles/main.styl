// Import CSS from "node_modules" and "bower_components"
// thanks to Stylus' "import css" and "paths" options
@import 'bespoke-meta-markdown/node_modules/highlight.js/styles/monokai_sublime.css'


///
/// Variables
$page-header-height = 12vh


///
/// General tags
html, body
  height 100%
  overflow hidden

body

.bespoke-slide
  img.full-width
    width 100%
  img.large-width
    width 600px
  img.medium-width
    width 400px
  img.small-width
    width 200px
  img.full-height
    height 100%
  img.large-height
    height 400px
  img.medium-height
    height 300px
  img.small-height
    height 200px

del
  color gray


/// Header and content layout
$meny-offset-top = 10px

body
  perspective 800px
  perspective-origin 50% 0
  &.menu-open
    &> #page-header
      transform translate3d(0,0,0)
      transition transform 200ms ease-out

    &> #presentation-container
      transform-origin 50% 0%
      transform translateY($page-header-height) rotateX(-15deg)
      transform-style preserve-3d

      &:before
        background-image -webkit-linear-gradient(top, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.65) 100%)

    .bespoke-progress-parent
      transform translateY(0)

#page-header
  position fixed
  width 100%
  height $page-header-height
  padding 0
  transition transform 400ms ease-out
  -webkit-transform-origin 50% 0% 0px
  transform rotateX(30deg) translateY(-100%) translateY($meny-offset-top)
  z-index 1
  overflow hidden
  background-color rgb(255, 213, 213)


#page-title
  display inline-block
  height 10vh
  margin 0
  font-size 7vh
  vertical-align top

  &> a
    &:hover
      text-decoration none

    position relative
    color rgba(0,0,0,0.2)

    &:before
      color #b66c7e
      content attr(data-hover)
      position absolute
      transition transform 0.3s, opacity 0.3s

    &:hover:before
      opacity 0
      transform scale(0.98)

.bespoke-progress-parent
  transform translateY($meny-offset-top - 1)
  transition transform 200ms ease-out


#page-author
  display inline-block
  float right
  margin 8px

#page-author-name
  display none

.page-author-picture
  width 60px
  height 60px
  border-radius 30px

#presentation-container
  position relative
  height 100%
  transition all 400ms ease-out

  &:before
    content ''
    position absolute
    display: block
    left 0
    top 0
    bottom 0
    right 0
    z-index 1000
    pointer-events none
    -webkit-transition all 400ms ease-out
    transition transform 400ms ease-out
    background-image none
    will-change background-image

// animated background of the body
@media screen and (min-device-width: 640px)
  body
    background-image linear-gradient(328deg, #fff, #e8e8e8, #fff, #fcfcfc, #e1e1e1, #f4f4f4)
    background-size 800% 800%
    animation bodyAnim 25s ease infinite

@keyframes bodyAnim
  0%
    background-position 49% 0
  50%
    background-position 52% 100%
  100%
    background-position 49% 0


// only render the necessary slides: current, immediately after, immed. before (to improve performance)
.bespoke-slide.bespoke-inactive.bespoke-after:not(.bespoke-after-1)
  display none
.bespoke-slide.bespoke-inactive.bespoke-before:not(.bespoke-before-1)
  display none

.bullet.bullet.bullet-no-anim.bespoke-bullet-inactive
  transform none
  transition none


/// Presentation
$book-gutter-width = 30px
$book-height = 250px

.book-cover-container
  position relative
  perspective 400px
  transform-style preserve-3d
  transform rotateY(0)
  transform-origin center center
  transition transform 300ms ease-out

  &:hover
    transform rotateY(40deg)


.book-cover
  height $book-height

.book-left
  position absolute
  top 0
  left - $book-gutter-width
  width $book-gutter-width
  height $book-height
  transform rotateY(-90deg)
  background-color black
  transform-origin right center 0
  &.book-light
    background-color beige


.layered-paragraph
  background-color rgba(215, 215, 250, 0.5);

.pure-red
  color #ff0000
.pure-green
  color #00ff00
.pure-blue
  color #0000ff

.color-portrait
  display inline-block
  width 20px
  height 20px
  border 1px solid black

  &.ffd5d5
    background-color #ffd5d5


$portrait-size = 100px
.portrait,
.portrait img
  display inline-block
  width $portrait-size
  height $portrait-size
  border-radius ($portrait-size / 2)
  figcaption
    background-color transparent

.portrait.right
  float right

img[alt$="right"]
  float right
img[alt$="left"]
  float left


/// Tutorial
$tutorial-right = 20px
.tutorial
  position absolute
  right $tutorial-right
  bottom 80px
  padding .5em .75em
  border-radius 20px
  background-color rgba(255, 255, 255, .7)
  font-family 'Cookie', cursive
  font-size 2em
  transition opacity 300ms ease-out
  opacity 0
  &.tutorial-on
    opacity 1
    animation bounce 1s ease-out 0s infinite alternate

@keyframes bounce
  from
    right: $tutorial-right;

  to
    right: $tutorial-right * 2;




.full-height-right
  float right
  max-height 80%


// TODO: put this on the theme
table
  max-width 760px

td:not(:last-child), th:not(:last-child)
  border-right 1px solid rgba(0,0,0,.2)

td
  padding 6px

th
  padding 10px

tr
  border 1px solid rgba(0,0,0,.4)

tr:nth-of-type(2n) > td
  background-color rgba(255,255,255,.4)

thead > tr
  background-color #555
  color white


// utility slide classes
.right-aligned
  float right
.left-aligned
  float left

.side-by-side-children
  display flex
  flex-direction row
  align-items flex-start

// Slide backdrops
.paradigma-universos.bespoke-backdrop-active
  background-image url(../images/paradigma-universos-legenda.png)
  background-size: initial;
  background-position: left bottom;
  background-repeat: no-repeat;
  width 100%
  height 100%

.stars.bespoke-backdrop-active
  background-image url(../images/stars-bg.png)
  background-size: initial;
  width 100%
  height 100%
.bespoke-slide[data-bespoke-backdrop="stars"]
  color white